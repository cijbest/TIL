# Linux

> 사용한 리눅스 버전 : 15.5.1
>
> 책 - 이것이 리눅스다 with RedHat CentOS 8 (한빛미디어) 참고

#### 리눅스를 쓰는 이유 

- 무료 서버
- 저렴한 os에도 설치가 가능
- 은행이나 대기업에서는 유지보수를 직접해야 하므로 리눅스를 안 씀
- 많은 서버를 설치하는 비용 문제로 빅테이터, 클라우스 환경에서는 리눅스가 부상
- 리눅스는 유닉스와 완벽하게 호환 가능
- 강력한 보안 기능, 서버 OS로 적합
- 다중 사용자, 다중 작업(멀티 태스킹), 다중 스레드를 지원하는 네트워크 OS
- 커널, 쉘 등의 다양한 기능 지원

#### 리눅스의 단점

- 문제점 발생 시 보상받을 수 없음
- 한글 입출력 불편
- 사용자의 숙련된 기술 요구

#### 리눅스 설치

> CentOS-7-x86_64-DVD-2003, vmnetcfg_15_5_1 다운로드

1. Vmware(가상 서버) 설치

- vmware가 설치된 폴더에 vmnetcfg(virtual network editor) 파일을 관리자 권한으로 넣어둔다.

  - virtual network editor는 컴퓨터를 껐다 킬 때마다 가상머신에서 바뀌는 ip주소를 고정 시킨다.

2. 가상 머신 설치

- Create a New Virtual Machie 실행 후 CentOS 삽입
- 가상 머신을 설치할 폴더 지정(C:\LINUX)
- Maximum disk size : 가상 하드디스크의 용량 지정(처음부터 이 만큼의 용량을 차지하는 것은 아님)

3. 가상 머신 설정

- Memory(=RAM) : 호스트 컴퓨터가 가진 메모리를 가상머신과 나눠 갖게 하는 부분을 설정
- Processors(=CPU) : 호스트 컴퓨터의 CPU가 멀티코어(2개 이상의 CPU)라면 가상머신에도 여러 개 할당이 가능
- Hard Disk(=NVMe) : 하드디스크를 탈부착 가능
  - SCSI(스카시) 방식 : 하드디스크 10개 이상씩 붙일 수 있으며 컴퓨터와 주변 장치를 연결하는 고속 인터페이스
  - IDE 방식 : 우리가 쓰는 컴퓨터방식
4. CentOS 설치 (p74 참고)

- 시간 및 날짜 : 지역 - 아시아, 도시 - 서울
- 네트워크 및 호스트 이름 : 이더넷 - 켬
- 소프트웨어 선택 : 워크스테이션 선택
- 설치 목적지 : 저장소 구성 - Custom, 파티션 설정 - 표준 파티션, / 파티션과 swap 파티션 추가
  - 마운드 지점
    - / : 루트 파티션
    - swap : RAM에서 필요한 메모리를 아 쓰면 하드디스크에서 쓸 수 있는 공간
- Root 암호 : `111111` 로 설정
- User Creation : `centos`, `111111`

5. 로그인

- root : 파일 조작을 하기 위해서 root로 로그인해야 한다.

- 언어 설정 : 한국어 -> 한국어(Hangul) 선택
- 위치정보 서비스 - 끔
- 설정 -> 개인 정보 : 화면 잠금 - 끔
- 설정 -> 지역 및 언어 : 입력 소스 - 한국어(Hangul), 영어(미국) 순으로 설정

6. IP 주소 고정 및 할당

> 192.168.111.0에서 0이 있는 부분에 2부터 254까지 설치가 가능하다. (253개)
>
> IPv6는 많은 IP주소를 배포하려고 만든 것이다.
>
> 네이버 주소 치고 들어갈 때도 IP주소 끝에 번호만 바뀌어서 들어간다.

- vi /etc/sysconfig/network-scripts/ifcfg-ens33
  - BOOTPROTO="dhcp" -> "none"으로 변경
    IPADDR="192.168.111.120" -> IP 설정
    NETMASK="255.255.255.0"
    GATEWAY="192.168.111.2"
    DNS1="192.168.111.2"
  - dhcp : 호스트의 IP주소와 각종 TCP/IP 프로토콜의 기본 설정을 클라이언트에게 자동적으로 제공해주는 프로토콜

- systemctl restart network : 시스템 재시작
- vi /etc/sysconfig/selinux
  - SELINUX=disabled 로 변경, 보안 설정 끄기
  - 보안으로 인해 작동되지 않는 서비스를 실행시키기 위해 보안을 끈다. 회사에서는 방화벽내에서 회사용 리눅스 팜을 만들어서 사용하기 때문에 리눅스 내에서는 방화벽을 해제해 놔도 된다.

#### 가상 서버 복제

1. 복제할 서버 폴더를 선택하고 복사한다.
2. 복제한 폴더 안의 VMX 파일을 워드패드로 열어서 displayName을 새로 지정한다.
   - displayName은 VMware에서 보여지는 가상서버의 이름이다.
3. VMware를 킨 후 Open a virtual machine을 클릭해서 복제한 서버를 연다.
4. 추가한 서버를 클릭한 후 Edit virtual machine settings -> Network Adapter -> Advanced...를 누른다.
5. 하단에 MAC Address를 Generate 해준다.
   -  MAC Address : 고유한 토아신기기 번호, 이것을 변경시켜주어야 새로운 기기로 탄생한다.
6. OK 버튼 누르고 나와서 Play virtual machine을 눌러 가상머신을 실행한다.
7. 서버 실행 전 I move it를 꼭 클릭해주어야 한다.
8. ifcfg-ens33에서 IP주소 변경

#### 리눅스 명령어

- ping {IP주소} : IP 살아있는지 확인
- ctrl ＋ｃ : 끝내기
- su - centos : centos로 로그인
- centos에서 root로 돌아오는 방법 : exit 또는 logout
- root에서는 logout 안 되고 exit를 사용한다. 터미널 창이 닫힌다.
- cat : 내용 보기
- more : 내용 보기
- touch a.txt : 파일 새로 만들기
- gedit : 메모장 처럼 편리한 문서편집 기능
- vi를 한 후 문서 내에서 :w test2.txt 를 하면 test2.txt라는 복사본을 만들 수 있다. 

#### vi 명령어

- i : 현재 커서의 위치부터 입력   /   I : 현재 커서 줄의 맨 앞에서부터 입력
- a : 현재 커서의 위치 다음 칸부터 입력   /   A : 현재 커서 줄의 맨 마지막부터 입력
- o : 현재 커서의 다음 줄에 입력   /   O : 현재 커서의 이전 줄에 입력
- s : 현재 커서 위치의 한 글자를 지우고 입력   /   S : 현재 커서의 한줄을 지우고 입력, 빈 줄에선 안 됨
- cw : 현재 커서의 한 줄을 지우고 입력
- h : ←   /   j : ↓   /   k : ↑   /   l : →
- ctrl + F : Page Down   /   ctrl + B : Page Up
- ^ : 현재 행의 처음으로 이동
- s : 현재 행의 마지막으로 이동
- gg : 제일 첫 행으로 이동
- G : 제일 끝 행으로 이동
- 숫자G : 해당 숫자의 행으로 이동
- 숫자Enter : 해당 숫자의 행으로 이동
- x : 현재 커서가 위치한 글자 삭제   /   X : 현재 커서가 위치한 앞글자 삭제
- dd : 현재 커서의 행 삭제   /   숫자dd : 현재 커서부터 숫자만큼의 행 삭제
- yy : 현재 커서가 있는 행을 복사   /   숫자yy : 현재 커서부터 숫자만큼의 행을 복사
- p : 복사한 내용을 현재 행 이후에 붙여넣기   /   P :  복사한 내용을 현재 행 이전에 붙여넣기
- /문자열 : 해당 문자열을 찾음   /   n : 찾은 문자 중에서 다음 문자로 이동
- :%s/기존문자열/새문자열 : 문자열 치환
- :set nu : 행 번호 표시